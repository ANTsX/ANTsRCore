<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Perform registration between two images. — antsRegistration • ANTsRCore</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">ANTsRCore</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Perform registration between two images.</h1>
    </div>

    
    <p>Register a pair of images either through the full or simplified interface
to the ANTs registration method.</p>
    

    <pre class="usage"><span class='fu'>antsRegistration</span>(<span class='kw'>fixed</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>moving</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>typeofTransform</span> <span class='kw'>=</span> <span class='st'>"SyN"</span>,
  <span class='kw'>initialTransform</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>outprefix</span> <span class='kw'>=</span> <span class='st'>""</span>, <span class='kw'>mask</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>gradStep</span> <span class='kw'>=</span> <span class='fl'>0.2</span>,
  <span class='kw'>flowSigma</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>totalSigma</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>affMetric</span> <span class='kw'>=</span> <span class='st'>"mattes"</span>, <span class='kw'>affSampling</span> <span class='kw'>=</span> <span class='fl'>32</span>,
  <span class='kw'>synMetric</span> <span class='kw'>=</span> <span class='st'>"mattes"</span>, <span class='kw'>synSampling</span> <span class='kw'>=</span> <span class='fl'>32</span>, <span class='kw'>regIterations</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>40</span>, <span class='fl'>20</span>, <span class='fl'>0</span>),
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>fixed</th>
      <td><p>fixed image to which we register the moving image.</p></td>
    </tr>
    <tr>
      <th>moving</th>
      <td><p>moving image to be mapped to fixed space.</p></td>
    </tr>
    <tr>
      <th>typeofTransform</th>
      <td><p>A linear or non-linear registration type.  Mutual
information metric by default. See <code>Details.</code></p></td>
    </tr>
    <tr>
      <th>initialTransform</th>
      <td><p>transforms to prepend</p></td>
    </tr>
    <tr>
      <th>outprefix</th>
      <td><p>output will be named with this prefix.</p></td>
    </tr>
    <tr>
      <th>mask</th>
      <td><p>mask the registration.</p></td>
    </tr>
    <tr>
      <th>gradStep</th>
      <td><p>gradient step size (not for all tx)</p></td>
    </tr>
    <tr>
      <th>flowSigma</th>
      <td><p>smoothing for update field</p></td>
    </tr>
    <tr>
      <th>totalSigma</th>
      <td><p>smoothing for total field</p></td>
    </tr>
    <tr>
      <th>affMetric</th>
      <td><p>the metric for the affine part (GC, mattes, meansquares)</p></td>
    </tr>
    <tr>
      <th>affSampling</th>
      <td><p>the nbins or radius parameter for the syn metric</p></td>
    </tr>
    <tr>
      <th>synMetric</th>
      <td><p>the metric for the syn part (CC, mattes, meansquares, demons)</p></td>
    </tr>
    <tr>
      <th>synSampling</th>
      <td><p>the nbins or radius parameter for the syn metric</p></td>
    </tr>
    <tr>
      <th>regIterations</th>
      <td><p>vector of iterations for syn.  we will set the smoothing
and multi-resolution parameters based on the length of this vector.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>request verbose output (useful for debugging)</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional options see antsRegistration in ANTs</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>outputs a list containing:</p><ul>
<li><p>warpedmovout: Moving image warped to space of fixed image.</p></li>
<li><p>warpedfixout: Fixed image warped to space of moving image.</p></li>
<li><p>fwdtransforms: Transforms to move from moving to fixed image.</p></li>
<li><p>invtransforms: Transforms to move from fixed to moving image.</p></li>
</ul><p>Ouptut of 1 indicates failure</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>typeofTransform can be one of:</p><ul>
<li><p>"Translation": Translation transformation.</p></li>
<li><p>"Rigid": Rigid transformation: Only rotation and translation.</p></li>
<li><p>"Similarity": Similarity transformation: scaling, rotation and translation.</p></li>
<li><p>"QuickRigid": Rigid transformation: Only rotation and translation.
  May be useful for quick visualization fixes.'</p></li>
<li><p>"DenseRigid": Rigid transformation: Only rotation and translation.
  Employs dense sampling during metric estimation.'</p></li>
<li><p>"BOLDRigid": Rigid transformation: Parameters typical for BOLD
  to BOLD intrasubject registration'.'</p></li>
<li><p>"Affine": Affine transformation: Rigid + scaling.</p></li>
<li><p>"AffineFast": Fast version of <code>Affine</code>.</p></li>
<li><p>"BOLDAffine": Affine transformation: Parameters typical for BOLD
  to BOLD intrasubject registration'.'</p></li>
<li><p>"TRSAA": translation, rigid, similarity, affine (twice). please set
    <code>regIterations</code> if using this option.  this would be used in cases
    where you want a really high quality affine mapping (perhaps with mask).</p></li>
<li><p>"ElasticSyN": Symmetric normalization: Affine + deformable transformation,
    with mutual information as optimization metric and elastic regularization.</p></li>
<li><p>"SyN": Symmetric normalization: Affine + deformable transformation,
    with mutual information as optimization metric.</p></li>
<li><p>"SyNRA": Symmetric normalization: Rigid + Affine + deformable transformation,
    with mutual information as optimization metric.</p></li>
<li><p>"SyNOnly": Symmetric normalization: no initial transformation,
    with mutual information as optimization metric.  Assumes images are
    aligned by an inital transformation. Can be useful if you want to run
    an unmasked affine followed by masked deformable registration.</p></li>
<li><p>"SyNCC": SyN, but with cross-correlation as the metric.</p></li>
<li><p>"SyNabp": SyN optimized for abpBrainExtraction.</p></li>
<li><p>"SyNBold": SyN, but optimized for registrations between
    BOLD and T1 images.</p></li>
<li><p>"SyNBoldAff": SyN, but optimized for registrations between
    BOLD and T1 images, with additional affine step.</p></li>
<li><p>"SyNAggro": SyN, but with more aggressive registration
    (fine-scale matching and more deformation).  Takes more time than <code>SyN</code>.</p></li>
<li><p>"TVMSQ": time-varying diffeomorphism with mean square metric</p></li>
<li><p>"TVMSQC": time-varying diffeomorphism with mean square metric for very large deformation</p></li>
</ul>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='no'>fi</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='antsImageRead.html'>antsImageRead</a></span>(<span class='fu'><a href='getANTsRData.html'>getANTsRData</a></span>(<span class='st'>"r16"</span>) )
<span class='no'>mi</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='antsImageRead.html'>antsImageRead</a></span>(<span class='fu'><a href='getANTsRData.html'>getANTsRData</a></span>(<span class='st'>"r64"</span>) )
<span class='no'>fi</span><span class='kw'>&lt;-</span><span class='fu'><a href='resampleImage.html'>resampleImage</a></span>(<span class='no'>fi</span>,<span class='fu'>c</span>(<span class='fl'>60</span>,<span class='fl'>60</span>),<span class='fl'>1</span>,<span class='fl'>0</span>)
<span class='no'>mi</span><span class='kw'>&lt;-</span><span class='fu'><a href='resampleImage.html'>resampleImage</a></span>(<span class='no'>mi</span>,<span class='fu'>c</span>(<span class='fl'>60</span>,<span class='fl'>60</span>),<span class='fl'>1</span>,<span class='fl'>0</span>) <span class='co'># speed up</span>
<span class='no'>mytx</span> <span class='kw'>&lt;-</span> <span class='fu'>antsRegistration</span>(<span class='kw'>fixed</span><span class='kw'>=</span><span class='no'>fi</span>, <span class='kw'>moving</span><span class='kw'>=</span><span class='no'>mi</span>, <span class='kw'>typeofTransform</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>'SyN'</span>) )
<span class='no'>mywarpedimage</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='antsApplyTransforms.html'>antsApplyTransforms</a></span>( <span class='kw'>fixed</span><span class='kw'>=</span><span class='no'>fi</span>, <span class='kw'>moving</span><span class='kw'>=</span><span class='no'>mi</span>,
  <span class='kw'>transformlist</span><span class='kw'>=</span><span class='no'>mytx</span>$<span class='no'>fwdtransforms</span> )</div><span class='co'># NOT RUN {</span>
 <span class='co'># quick visualization fix for images with odd orientation</span>
<span class='no'>mni</span> <span class='kw'>=</span> <span class='fu'><a href='antsImageRead.html'>antsImageRead</a></span>( <span class='fu'><a href='getANTsRData.html'>getANTsRData</a></span>( <span class='st'>"mni"</span> ) )
<span class='no'>strokt1</span><span class='kw'>=</span><span class='fu'><a href='antsImageRead.html'>antsImageRead</a></span>(<span class='st'>'strokt1.nii.gz'</span>)
<span class='no'>strokt1reg</span><span class='kw'>=</span><span class='fu'>antsRegistration</span>(
  <span class='kw'>fixed</span><span class='kw'>=</span><span class='no'>mni</span>,
  <span class='kw'>moving</span><span class='kw'>=</span><span class='no'>strokt1</span>,
  <span class='kw'>typeofTransform</span> <span class='kw'>=</span> <span class='st'>"QuickRigid"</span>,<span class='kw'>verbose</span><span class='kw'>=</span><span class='fl'>TRUE</span> )
 <span class='fu'>plot</span>(  <span class='no'>strokt1reg</span>$<span class='no'>warpedmovout</span>, <span class='kw'>axis</span><span class='kw'>=</span><span class='fl'>3</span>, <span class='kw'>nslices</span><span class='kw'>=</span><span class='fl'>20</span>)
<span class='co'># now - how to use a mask</span>
<span class='no'>fi</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='antsImageRead.html'>antsImageRead</a></span>(<span class='fu'><a href='getANTsRData.html'>getANTsRData</a></span>(<span class='st'>"r16"</span>) )
<span class='no'>fiseg</span> <span class='kw'>=</span> <span class='fu'><a href='kmeansSegmentation.html'>kmeansSegmentation</a></span>( <span class='no'>fi</span>, <span class='fl'>3</span> )
<span class='no'>mi</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='antsImageRead.html'>antsImageRead</a></span>(<span class='fu'><a href='getANTsRData.html'>getANTsRData</a></span>(<span class='st'>"r64"</span>) )
<span class='no'>msk</span> <span class='kw'>=</span> <span class='fu'><a href='thresholdImage.html'>thresholdImage</a></span>(<span class='no'>fiseg</span>$<span class='no'>segmentation</span>, <span class='fl'>0</span>, <span class='fl'>0</span> )
<span class='no'>mytx</span> <span class='kw'>&lt;-</span> <span class='fu'>antsRegistration</span>(<span class='kw'>fixed</span><span class='kw'>=</span><span class='no'>fi</span>, <span class='kw'>moving</span><span class='kw'>=</span><span class='no'>mi</span>, <span class='kw'>typeofTransform</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>'SyNCC'</span>),
  <span class='kw'>mask</span><span class='kw'>=</span><span class='no'>msk</span>, <span class='kw'>verbose</span><span class='kw'>=</span><span class='no'>F</span> )
<span class='no'>jac</span> <span class='kw'>=</span> <span class='fu'>createJacobianDeterminantImage</span>( <span class='no'>fi</span>, <span class='no'>mytx</span>$<span class='no'>fwdtransforms</span>[<span class='fl'>1</span>] )
<span class='co'># }</span><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Shrinidhi KL, Tustison NJ, Avants BB

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Brian B. Avants, Benjamin M. Kandel, Philip A. Cook, Nicholas J. Tustison.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
